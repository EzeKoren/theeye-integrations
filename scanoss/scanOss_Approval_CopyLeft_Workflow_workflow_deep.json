{"order":0,"enable":true,"description":"","tags":[],"triggers":[],"table_view":false,"assigned_users":[],"user_inputs_members":[],"acl":[],"empty_viewers":false,"acl_dynamic":false,"_type":"Workflow","autoremove_completed_jobs_limit":5,"name":"scanOss Approval CopyLeft Workflow","allows_dynamic_settings":false,"graph":{"options":{"directed":true,"multigraph":false,"compound":false},"nodes":[{"v":"fab11d79-d2b3-4a87-8cc7-c6010e694b69","value":{"name":"scanOss Install","id":"fab11d79-d2b3-4a87-8cc7-c6010e694b69","_type":"ScriptTask","type":"script"}},{"v":"5564884a-cbca-4d99-b08c-cbacbfa43551","value":{"name":"Scanoss directory","id":"5564884a-cbca-4d99-b08c-cbacbfa43551","_type":"ScriptTask","type":"script"}},{"v":"51823e2f-bca0-4dc4-842e-3d889ac0d1d6","value":{"name":"Aprobación Facundo","id":"51823e2f-bca0-4dc4-842e-3d889ac0d1d6","_type":"ApprovalTask","type":"approval"}},{"v":"1119a9ba-de51-4515-b5d1-faee428db8a8","value":{"name":"Aprobación Javier","id":"1119a9ba-de51-4515-b5d1-faee428db8a8","_type":"ApprovalTask","type":"approval"}},{"v":"dc399f7c-97ca-4255-a765-189cf5b7e3b7","value":{"name":"Esperar Aprobaciones","id":"dc399f7c-97ca-4255-a765-189cf5b7e3b7","_type":"ScriptTask","type":"script"}},{"v":"f6fdb9f8-95c9-4e8e-9b77-2b2351c1e401","value":{"name":"Aprobado","id":"f6fdb9f8-95c9-4e8e-9b77-2b2351c1e401","_type":"NotificationTask","type":"notification"}},{"v":"2f8dced1-e747-4a15-86fa-4bb3e347113f","value":{"name":"Git pull","id":"2f8dced1-e747-4a15-86fa-4bb3e347113f","_type":"ScriptTask","type":"script"}},{"v":"36a29528-7684-42de-99a6-125ae9f3c439","value":{"name":"Cancelación Dummy","id":"36a29528-7684-42de-99a6-125ae9f3c439","_type":"ScriptTask","type":"script"}},{"v":"7e2954a6-ae9c-476a-bf28-770cf727d251","value":{"name":"No Aprobado","id":"7e2954a6-ae9c-476a-bf28-770cf727d251","_type":"NotificationTask","type":"notification"}}],"edges":[{"v":"fab11d79-d2b3-4a87-8cc7-c6010e694b69","w":"5564884a-cbca-4d99-b08c-cbacbfa43551","value":"success"},{"v":"5564884a-cbca-4d99-b08c-cbacbfa43551","w":"51823e2f-bca0-4dc4-842e-3d889ac0d1d6","value":"success"},{"v":"5564884a-cbca-4d99-b08c-cbacbfa43551","w":"1119a9ba-de51-4515-b5d1-faee428db8a8","value":"success"},{"v":"51823e2f-bca0-4dc4-842e-3d889ac0d1d6","w":"dc399f7c-97ca-4255-a765-189cf5b7e3b7","value":"success"},{"v":"1119a9ba-de51-4515-b5d1-faee428db8a8","w":"dc399f7c-97ca-4255-a765-189cf5b7e3b7","value":"success"},{"v":"dc399f7c-97ca-4255-a765-189cf5b7e3b7","w":"f6fdb9f8-95c9-4e8e-9b77-2b2351c1e401","value":"aprobado"},{"v":"2f8dced1-e747-4a15-86fa-4bb3e347113f","w":"fab11d79-d2b3-4a87-8cc7-c6010e694b69","value":"success"},{"v":"36a29528-7684-42de-99a6-125ae9f3c439","w":"7e2954a6-ae9c-476a-bf28-770cf727d251","value":"success"},{"v":"51823e2f-bca0-4dc4-842e-3d889ac0d1d6","w":"36a29528-7684-42de-99a6-125ae9f3c439","value":"reject"},{"v":"1119a9ba-de51-4515-b5d1-faee428db8a8","w":"36a29528-7684-42de-99a6-125ae9f3c439","value":"reject"}]},"customer":"5562573181a2334537425eaf","customer_id":"5562573181a2334537425eaf","version":2,"creation_date":"2022-06-16T16:59:50.659Z","last_update":"2022-06-21T13:24:17.143Z","start_task":"62b1b18b3f7eb10012bf3cde","start_task_id":"2f8dced1-e747-4a15-86fa-4bb3e347113f","tasks":[{"order":0,"enable":true,"type":"script","public":false,"tags":[],"triggers":[],"grace_time":0,"task_arguments":[{"id":1,"order":0,"type":"input","label":"directory to scan","value":"","help":"indicates the directory path you want to scan","readonly":false,"required":true,"multiple":false,"masked":false,"charsmin":0,"charsmax":0,"charset":null,"pattern":"","options":[]}],"arguments_type":"legacy","output_parameters":[],"register_body":false,"multitasking":true,"show_result":false,"assigned_users":[],"user_inputs":false,"user_inputs_members":[],"acl":[],"empty_viewers":false,"cancellable":true,"autoremove_completed_jobs_limit":5,"version":3,"fingerprint":"0754779d-36f8-5b6e-8baf-d80a4a7a05e5","agent_logging":false,"_type":"ScriptTask","creation_date":"2022-06-16T16:59:50.676Z","last_update":"2022-06-21T13:25:16.206Z","customer_id":"5562573181a2334537425eaf","name":"scanOss Install","description":"","timeout":600000,"allows_dynamic_settings":false,"script_id":"62ab55ed3aab0c00126a181a","script_runas":"bash %script%","host_id":"62ab70513f7eb10012be24dd","script":{"order":0,"enable":true,"acl":[""],"tags":[],"description":"","md5":"c83f7f6e09852058551382ece271678b","_type":"Script","creation_date":"2022-06-16T16:10:21.016Z","last_update":"2022-06-16T19:21:33.371Z","_id":"62ab55ed3aab0c00126a181a","filename":"scanOssDependecies.sh","mimetype":"text/x-sh","extension":"sh","size":350,"customer":"5562573181a2334537425eaf","customer_id":"5562573181a2334537425eaf","customer_name":"demo","keyname":"scanOssDependecies.sh[ts:1655407293228]","id":"62ab55ed3aab0c00126a181a","source_model_id":"62ab55ed3aab0c00126a181a","data":"data:text/plain;base64,IyEvYmluL2Jhc2gKZGlyZWN0b3J5PSQxCmlmICEgY29tbWFuZCAtdiBzY2Fub3NzLXB5ICY+IC9kZXYvbnVsbAp0aGVuCiAgICBlY2hvICJzY2Fub3NzIGNvdWxkIG5vdCBiZSBmb3VuZCwgaW5zdGFsbGluZyBpdCIKICAgICN2ZXJpZmljYXIgc2kgaGFjZSBmYWx0YSB0b2RhcyBsYXMgZGVwZW5kZW5jaWFzIGxpYiouCiAgICBhcHQgdXBkYXRlICYmIGFwdCBpbnN0YWxsIC15IHB5dGhvbjMtcGlwIGpxIGxpYmF0ay0xLjAuc28uMCBsaWJnbGliMi4wLTAgbGlieDExLXhjYi1kZXYgCiAgICBwaXAzIGluc3RhbGwgc2Nhbm9zcwpmaQplY2hvICd7ImV2ZW50X25hbWUiOiJzdWNjZXNzIiwiZGF0YSI6IFsiJyQxJyJdfSc="},"host":"62ab70513f7eb10012be24dd","customer":"5562573181a2334537425eaf","template":null,"template_id":null,"id":"fab11d79-d2b3-4a87-8cc7-c6010e694b69","source_model_id":"62ab618697c1350012ac0778"},{"order":0,"enable":true,"type":"script","public":false,"tags":[],"triggers":[],"grace_time":0,"task_arguments":[{"id":1,"order":0,"type":"input","label":"directory","value":"","help":"","readonly":false,"required":true,"multiple":false,"masked":false,"charsmin":0,"charsmax":0,"charset":null,"pattern":"","options":[]}],"arguments_type":"legacy","output_parameters":[],"register_body":false,"multitasking":true,"show_result":false,"assigned_users":[],"user_inputs":false,"user_inputs_members":[],"acl":[],"empty_viewers":false,"cancellable":true,"autoremove_completed_jobs_limit":5,"version":4,"fingerprint":"e8493822-393f-5f97-8e2a-149cc0e1566e","agent_logging":false,"_type":"ScriptTask","creation_date":"2022-06-17T02:05:40.540Z","last_update":"2022-06-21T13:25:16.398Z","env":{"APPROVALS_COUNT":"2"},"customer_id":"5562573181a2334537425eaf","name":"Scanoss directory","description":"","timeout":600000,"allows_dynamic_settings":false,"script_id":"62ab8d9397c1350012ac13a5","script_runas":"node %script%","host_id":"62ab70513f7eb10012be24dd","template_id":null,"script":{"order":0,"enable":true,"acl":[""],"tags":[],"description":"","md5":"ec1994b0cb5dc0fb41fa1b9bf80f62f4","_type":"Script","creation_date":"2022-06-16T20:07:47.892Z","last_update":"2022-06-21T12:41:25.128Z","_id":"62ab8d9397c1350012ac13a5","filename":"scan.js","mimetype":"text/javascript","extension":"js","size":5232,"customer":"5562573181a2334537425eaf","customer_id":"5562573181a2334537425eaf","customer_name":"demo","keyname":"scan.js[ts:1655815285048]","id":"62ab8d9397c1350012ac13a5","source_model_id":"62ab8d9397c1350012ac13a5","data":"data:text/plain;base64,Ly8gZXJyb3IgYW5kIG91dHB1dCBoYW5kbGVycyBtdXN0IGdvIGZpcnN0LgoKLyoqCiAqIEBwYXJhbSB7T2JqZWN0fQogKiBAcHJvcCB7TWl4ZWR9IGRhdGEKICogQHByb3Age0FycmF5fSBjb21wb25lbnRzCiAqIEBwcm9wIHtPYmplY3R9IG5leHQKICovCmNvbnN0IHN1Y2Nlc3NPdXRwdXQgPSAob3B0aW9ucyA9IHt9KSA9PiB7CiAgLy8gaHR0cHM6Ly9kb2N1bWVudGF0aW9uLnRoZWV5ZS5pby9jb3JlLWNvbmNlcHRzL3NjcmlwdHMvI3Bhc3NpbmctYXJndW1lbnRzLWluLXdvcmtmbG93CiAgY29uc3Qgb3V0cHV0ID0gT2JqZWN0LmFzc2lnbih7IHN0YXRlOiAnc3VjY2VzcycgfSwgb3B0aW9ucykKICBjb25zb2xlLmxvZyggSlNPTi5zdHJpbmdpZnkob3V0cHV0KSApCiAgcHJvY2Vzcy5leGl0KDApCn0KCi8qKgogKiBAcGFyYW0ge0Vycm9yfSBlcnIKICovCmNvbnN0IGZhaWx1cmVPdXRwdXQgPSAoZXJyKSA9PiB7CiAgY29uc29sZS5lcnJvcihlcnIpCiAgY29uc3Qgb3V0cHV0ID0gewogICAgc3RhdGU6ICJmYWlsdXJlIiwKICAgIGRhdGE6IHsKICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2UsCiAgICAgIGNvZGU6IGVyci5jb2RlLAogICAgICBkYXRhOiBlcnIuZGF0YSAKICAgIH0KICB9CiAgY29uc29sZS5lcnJvciggSlNPTi5zdHJpbmdpZnkob3V0cHV0KSApCiAgcHJvY2Vzcy5leGl0KDEpCn0KCnByb2Nlc3Mub24oJ3VuaGFuZGxlZFJlamVjdGlvbicsIChyZWFzb24sIHApID0+IHsKICBjb25zb2xlLmVycm9yKHJlYXNvbiwgJ1VuaGFuZGxlZCBSZWplY3Rpb24gYXQgUHJvbWlzZScsIHApCiAgZmFpbHVyZU91dHB1dChyZWFzb24pCn0pCgpwcm9jZXNzLm9uKCd1bmNhdWdodEV4Y2VwdGlvbicsIGVyciA9PiB7CiAgY29uc29sZS5lcnJvcihlcnIsICdVbmNhdWdodCBFeGNlcHRpb24gdGhyb3duJykKICBmYWlsdXJlT3V0cHV0KGVycikKfSkKCgpwcm9jZXNzLm9uY2UoJ1NJR0lOVCcsIGZ1bmN0aW9uIChjb2RlKSB7CiAgY29uc29sZS5sb2coJ1NJR0lOVCByZWNlaXZlZCcpOwogIGNvbnN0IGVyciA9IG5ldyBFcnJvcignU0lHSU5UIHJlY2VpdmVkJykKICBlcnIuY29kZSA9IGNvZGUKICBmYWlsdXJlT3V0cHV0KGVycikKfSkKCnByb2Nlc3Mub25jZSgnU0lHVEVSTScsIGZ1bmN0aW9uIChjb2RlKSB7CiAgY29uc29sZS5sb2coJ1NJR1RFUk0gcmVjZWl2ZWQuLi4nKTsKICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoJ1NJR1RFUk0gcmVjZWl2ZWQnKQogIGVyci5jb2RlID0gY29kZQogIGZhaWx1cmVPdXRwdXQoZXJyKQp9KQoKY29uc3Qgc3Bhd24gPSByZXF1aXJlKCdjaGlsZF9wcm9jZXNzJykuc3Bhd24KY29uc3QgZnMgPSByZXF1aXJlKCdmcycpCmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJykKCmNsYXNzIENhY2hlIHsKICAvKioKICAgKiBAY29uc3RydWN0b3IKICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucwogICAqLwogIGNvbnN0cnVjdG9yIChvcHRpb25zID0ge30pIHsKICAgIGNvbnN0IHsgY2FjaGVJZCwgcGF0aCB9ID0gb3B0aW9ucwogICAgdGhpcy5wYXRoID0gKHBhdGggfHwgJy4vY2FjaGUnKQogICAgaWYgKCFmcy5leGlzdHNTeW5jKHRoaXMucGF0aCkpIHsKICAgICAgZnMubWtkaXJTeW5jKHRoaXMucGF0aCwgeyByZWN1cnNpdmU6IHRydWUgfSkKICAgICAgY29uc29sZS5sb2coYGNhY2hlIGRpcmVjdG9yeSBjcmVhdGVkOiAke3RoaXMucGF0aH1gKQogICAgfQoKICAgIHRoaXMuY2FjaGVJZCA9IHByb2Nlc3MuZW52LkNBQ0hFX0lEIHx8IHRoaXMuY2hlY2tFbnYoY2FjaGVJZCkKICB9CgogIGRyb3AgKCkgewogICAgY29uc3QgZmlsZXMgPSBmcy5yZWFkZGlyU3luYyh0aGlzLnBhdGgpCiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHsKICAgICAgY29uc29sZS5sb2coZmlsZSkKICAgICAgaWYgKGZpbGUgPT09IGAke3RoaXMuY2FjaGVJZH0uanNvbmApIHsKICAgICAgICBmcy51bmxpbmtTeW5jKHBhdGguam9pbih0aGlzLnBhdGgsIGZpbGUpKQogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgIH0KICAgIHJldHVybiBmYWxzZQogIH0KCiAgcm90YXRlICgpIHsKICAgIGNvbnN0IGZpbGVuYW1lID0gcGF0aC5qb2luKHBhdGgucmVzb2x2ZSh0aGlzLnBhdGgpLCBgJHt0aGlzLmNhY2hlSWR9Lmpzb25gKQogICAgY29uc3QgZGF0ZSA9IGZzLmxzdGF0U3luYyhmaWxlbmFtZSkuYmlydGh0aW1lCiAgICBjb25zdCBtb250aCA9IChkYXRlLmdldE1vbnRoKCkgKyAxKSA8IDEwID8gYDAke2RhdGUuZ2V0TW9udGgoKSArIDF9YCA6IGAke2RhdGUuZ2V0TW9udGgoKSArIDF9YAogICAgY29uc3QgZGF5ID0gZGF0ZS5nZXREYXRlKCkgPCAxMCA/IGAwJHtkYXRlLmdldERhdGUoKX1gIDogZGF0ZS5nZXREYXRlKCkKICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCkKICAgIGNvbnN0IG5ld0ZpbGVuYW1lID0gcGF0aC5qb2luKHBhdGgucmVzb2x2ZSh0aGlzLnBhdGgpLCBgJHt0aGlzLmNhY2hlSWR9XyR7eWVhcn0ke21vbnRofSR7ZGF5fS5qc29uYCkKICAgIGZzLnJlbmFtZVN5bmMoZmlsZW5hbWUsIG5ld0ZpbGVuYW1lKQogIH0KCiAgLyoqCiAgICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWQKICAgKi8KICBzYXZlIChwYXlsb2FkKSB7CiAgICBjb25zdCBjb250ZW50ID0gSlNPTi5zdHJpbmdpZnkocGF5bG9hZCwgbnVsbCwgMikKICAgIGZzLndyaXRlRmlsZVN5bmMoYCR7dGhpcy5wYXRofS8ke3RoaXMuY2FjaGVJZH0uanNvbmAsIGNvbnRlbnQsICd1dGY4JykKICB9CgogIC8qKgogICAqIEByZXR1cm4ge09iamVjdH0KICAgKi8KICBnZXQgKCkgewogICAgdHJ5IHsKICAgICAgY29uc3QgY29udGVudCA9IGZzLnJlYWRGaWxlU3luYyhgJHt0aGlzLnBhdGh9LyR7dGhpcy5jYWNoZUlkfS5qc29uYCwgJ3V0ZjgnKQogICAgICByZXR1cm4gSlNPTi5wYXJzZShjb250ZW50KQogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIGNvbnNvbGUubG9nKGBDYWNoZSBmaWxlICIke3RoaXMuY2FjaGVJZH0iIGRvZXNuJ3QgZXhpc3RgKQogICAgICByZXR1cm4ge30KICAgIH0KICB9CgogIGNoZWNrRW52IChjYWNoZUlkID0gbnVsbCkgewogICAgaWYgKGNhY2hlSWQpIHsKICAgICAgcmV0dXJuIGNhY2hlSWQKICAgICAgLy8gdXNlIHRoaXMgaWQKICAgIH0KCiAgICBpZiAocHJvY2Vzcy5lbnYuVEhFRVlFX0pPQikgewogICAgICBjYWNoZUlkID0gSlNPTi5wYXJzZShwcm9jZXNzLmVudi5USEVFWUVfSk9CKS50YXNrX2lkCiAgICB9IGVsc2UgewogICAgICBjYWNoZUlkID0gbmV3IERhdGUoKS5nZXRUaW1lKCkKICAgIH0KICAgIHJldHVybiBjYWNoZUlkCiAgfQp9CgoKCi8vIE5vZGVKcyBib2lsZXJwbGF0ZQpjb25zdCBtYWluID0gYXN5bmMgKGRpcikgPT4gewogIAoKICBjb25zdCB7IHN0ZG91dCwgc3RkZXJyLCBjb2RlIH0gPSBhd2FpdCBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgY29uc3Qgc2Nhbm9zcyA9IHNwYXduKCdzY2Fub3NzLXB5JywgWydzY2FuJywgZGlyXSkKICAgIAogICAgbGV0IGVycm9yLCBzdGRvdXQgPSAnJywgc3RkZXJyID0gJycsIGNvZGUKCiAgICBzY2Fub3NzLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgIHN0ZG91dCArPSBkYXRhCiAgICB9KQoKICAgIHNjYW5vc3Muc3RkZXJyLm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgc3RkZXJyICs9IGRhdGEKICAgIH0pCiAgICAKICAgIHNjYW5vc3Mub24oJ2Vycm9yJywgKHNwYXduRXJyKSA9PiB7CiAgICAgIGNvbnNvbGUuZXJyb3IoYGVycm9yYCkKICAgICAgY29uc29sZS5lcnJvcihzcGF3bkVycikKICAgICAgZXJyb3IgPSBzcGF3bkVycgogICAgfSkKCiAgICBzY2Fub3NzLm9uKCdjbG9zZScsIChjb2RlKSA9PiB7CiAgICAgIGlmIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcikKICAgICAgfSBlbHNlIHsKICAgICAgICByZXNvbHZlKHsgc3Rkb3V0LCBzdGRlcnIsIGNvZGUsIGVycm9yIH0pCiAgICAgIH0KICAgIH0pCiAgfSkKICAKICBjb25zdCBjb3B5bGVmdCA9IFtdCiAgCiAgbGV0IHNjYW5uZWQKICB0cnkgewogIAlzY2FubmVkID0gSlNPTi5wYXJzZShzdGRvdXQpCiAgfSBjYXRjaCAoZXJyKSB7CiAgICBjb25zb2xlLmxvZyhzdGRvdXQpCiAgICB0aHJvdyBlcnIKICB9CiAgCiAgY29uc29sZS5sb2coYFNlYXJjaGluZyBsaWNlbmNlc2ApCiAgZm9yIChsZXQgc291cmNlIGluIHNjYW5uZWQpIHsKICAgIGNvbnN0IGNvbXBvbmVudHMgPSBzY2FubmVkW3NvdXJjZV0KICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjb21wb25lbnRzLmxlbmd0aDsgaW5kZXgrKykgewogICAgICBjb25zdCBjb21wb25lbnQgPSBjb21wb25lbnRzW2luZGV4XQogICAgICBpZiAoQXJyYXkuaXNBcnJheShjb21wb25lbnQubGljZW5zZXMpICYmIGNvbXBvbmVudC5saWNlbnNlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgZm9yIChsZXQgaW5kZXhMID0gMDsgaW5kZXhMIDwgY29tcG9uZW50LmxpY2Vuc2VzLmxlbmd0aDsgaW5kZXhMKyspIHsKICAgICAgICAgIGNvbnN0IGxpY2Vuc2UgPSBjb21wb25lbnQubGljZW5zZXNbaW5kZXhMXQogICAgICAgICAgY29uc29sZS5sb2cobGljZW5zZSkKICAgICAgICAgIGlmIChsaWNlbnNlLmNvcHlsZWZ0ID09PSAneWVzJykgewogICAgICAgICAgICBjb3B5bGVmdC5wdXNoKFtzb3VyY2UsIGxpY2Vuc2UuY29weWxlZnQgXSkKICAgICAgICAgICAgYnJlYWsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIGNvbnN0IGNhY2hlSWQgPSBKU09OLnBhcnNlKHByb2Nlc3MuZW52LlRIRUVZRV9KT0JfV09SS0ZMT1cpLmpvYl9pZAogIGNvbnN0IGNhY2hlID0gbmV3IENhY2hlKHsgY2FjaGVJZCB9KQogIGNhY2hlLnNhdmUoeyB3YWl0aW5nOiBwcm9jZXNzLmVudi5BUFBST1ZBTFNfQ09VTlQgfSkKCiAgbGV0IGh0bWwgPSAnPHRhYmxlIGNsYXNzPSJ0YWJsZSB0YWJsZS1zdHJpcCI+PHRoZWFkPjx0cj48dGg+c291cmNlPC90aD48dGg+Y29weWxlZnQ8L3RoPjwvdGhlYWQ+JwogIGNvcHlsZWZ0LmZvckVhY2gocGFyID0+IHsKICAgIGh0bWwgKz0gYDx0cj48dGQ+JHtwYXJbMF19PC90ZD48dGQ+JHtwYXJbMV19PC90ZD48L3RyPmAKICB9KQogIGh0bWwgKz0gJzwvdGFibGU+JwogIHJldHVybiB7IGRhdGE6IGh0bWwgfQp9CgovLyBpbnZva2UgbWFpbiBhbmQgY2FwdHVyZSByZXN1bHQgb3V0cHV0Cm1haW4oIHByb2Nlc3MuYXJndlsyXSApLnRoZW4oc3VjY2Vzc091dHB1dCkuY2F0Y2goZmFpbHVyZU91dHB1dCkK"},"host":"62ab70513f7eb10012be24dd","customer":"5562573181a2334537425eaf","template":null,"id":"5564884a-cbca-4d99-b08c-cbacbfa43551","source_model_id":"62abe1743f7eb10012be4035"},{"order":0,"enable":true,"type":"approval","public":false,"tags":[],"triggers":[],"grace_time":0,"task_arguments":[{"id":1,"order":0,"type":"input","label":"list","value":"","help":"","readonly":false,"required":true,"multiple":false,"masked":false,"charsmin":0,"charsmax":0,"charset":null,"pattern":"","options":[]}],"arguments_type":"legacy","output_parameters":[],"register_body":false,"multitasking":true,"show_result":false,"assigned_users":[],"user_inputs":false,"user_inputs_members":[],"acl":[],"empty_viewers":false,"cancellable":true,"autoremove_completed_jobs_limit":5,"version":4,"fingerprint":"e3d7d370-93e9-5710-bbaa-6958dc8695eb","success_enabled":true,"failure_enabled":true,"cancel_enabled":true,"ignore_enabled":true,"approvers":["5579a46581a2334537425ebd"],"_type":"ApprovalTask","creation_date":"2022-06-17T02:39:45.566Z","last_update":"2022-06-21T13:25:36.398Z","name":"Aprobación Facundo","description":"","allows_dynamic_settings":false,"approvals_target":"fixed","success_label":"Approve","failure_label":"Reject","cancel_label":"Cancel","ignore_label":"Ignore","customer_id":"5562573181a2334537425eaf","customer":"5562573181a2334537425eaf","template":null,"template_id":null,"id":"51823e2f-bca0-4dc4-842e-3d889ac0d1d6","source_model_id":"62abe97197c1350012ac2818"},{"order":0,"enable":true,"type":"approval","public":false,"tags":[],"triggers":[],"grace_time":0,"task_arguments":[{"id":1,"order":0,"type":"input","label":"list","value":"","help":"","readonly":false,"required":true,"multiple":false,"masked":false,"charsmin":0,"charsmax":0,"charset":null,"pattern":"","options":[]}],"arguments_type":"legacy","output_parameters":[],"register_body":false,"multitasking":true,"show_result":false,"assigned_users":[],"user_inputs":false,"user_inputs_members":[],"acl":[],"empty_viewers":false,"cancellable":true,"autoremove_completed_jobs_limit":5,"version":4,"fingerprint":"88a29cdf-7a16-53be-828f-d0d86aeab332","success_enabled":true,"failure_enabled":true,"cancel_enabled":true,"ignore_enabled":true,"approvers":["54d2d804bef8c362203ad603"],"_type":"ApprovalTask","creation_date":"2022-06-17T02:39:45.610Z","last_update":"2022-06-21T13:25:36.394Z","name":"Aprobación Javier","description":"","allows_dynamic_settings":false,"approvals_target":"fixed","success_label":"Approve","failure_label":"Reject","cancel_label":"Cancel","ignore_label":"Ignore","customer_id":"5562573181a2334537425eaf","customer":"5562573181a2334537425eaf","template":null,"template_id":null,"id":"1119a9ba-de51-4515-b5d1-faee428db8a8","source_model_id":"62abe97197c1350012ac281b"},{"order":0,"enable":true,"type":"script","public":false,"tags":[],"triggers":[],"grace_time":0,"task_arguments":[],"arguments_type":"legacy","output_parameters":[],"register_body":false,"multitasking":true,"show_result":false,"assigned_users":[],"user_inputs":false,"user_inputs_members":[],"acl":[],"empty_viewers":false,"cancellable":true,"autoremove_completed_jobs_limit":5,"version":1,"fingerprint":"904c1733-a24c-5d8d-98d3-dce1010c28d9","agent_logging":false,"_type":"ScriptTask","creation_date":"2022-06-17T02:39:45.662Z","last_update":"2022-06-21T13:25:51.150Z","name":"Esperar Aprobaciones","description":"","timeout":600000,"allows_dynamic_settings":false,"script_id":"62abe8cf3aab0c00126a3850","script_runas":"node %script%","host_id":"62ab70513f7eb10012be24dd","script":{"order":0,"enable":true,"acl":[""],"tags":[],"description":"","md5":"1b873894b9f6bc950740709e7799e398","_type":"Script","creation_date":"2022-06-17T02:37:03.287Z","last_update":"2022-06-17T02:46:35.633Z","_id":"62abe8cf3aab0c00126a3850","filename":"waitAprobaciones.js","mimetype":"text/javascript","extension":"js","size":2340,"customer":"5562573181a2334537425eaf","customer_id":"5562573181a2334537425eaf","customer_name":"demo","keyname":"waitAprobaciones.js[ts:1655433995536]","id":"62abe8cf3aab0c00126a3850","source_model_id":"62abe8cf3aab0c00126a3850","data":"data:text/plain;base64,Y29uc3QgZnMgPSByZXF1aXJlKCdmcycpCmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJykKCmNsYXNzIENhY2hlIHsKICAvKioKICAgKiBAY29uc3RydWN0b3IKICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucwogICAqLwogIGNvbnN0cnVjdG9yIChvcHRpb25zID0ge30pIHsKICAgIGNvbnN0IHsgY2FjaGVJZCwgcGF0aCB9ID0gb3B0aW9ucwogICAgdGhpcy5wYXRoID0gKHBhdGggfHwgJy4vY2FjaGUnKQogICAgaWYgKCFmcy5leGlzdHNTeW5jKHRoaXMucGF0aCkpIHsKICAgICAgZnMubWtkaXJTeW5jKHRoaXMucGF0aCwgeyByZWN1cnNpdmU6IHRydWUgfSkKICAgICAgY29uc29sZS5sb2coYGNhY2hlIGRpcmVjdG9yeSBjcmVhdGVkOiAke3RoaXMucGF0aH1gKQogICAgfQoKICAgIHRoaXMuY2FjaGVJZCA9IHByb2Nlc3MuZW52LkNBQ0hFX0lEIHx8IHRoaXMuY2hlY2tFbnYoY2FjaGVJZCkKICB9CgogIGRyb3AgKCkgewogICAgY29uc3QgZmlsZXMgPSBmcy5yZWFkZGlyU3luYyh0aGlzLnBhdGgpCiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHsKICAgICAgY29uc29sZS5sb2coZmlsZSkKICAgICAgaWYgKGZpbGUgPT09IGAke3RoaXMuY2FjaGVJZH0uanNvbmApIHsKICAgICAgICBmcy51bmxpbmtTeW5jKHBhdGguam9pbih0aGlzLnBhdGgsIGZpbGUpKQogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgIH0KICAgIHJldHVybiBmYWxzZQogIH0KCiAgcm90YXRlICgpIHsKICAgIGNvbnN0IGZpbGVuYW1lID0gcGF0aC5qb2luKHBhdGgucmVzb2x2ZSh0aGlzLnBhdGgpLCBgJHt0aGlzLmNhY2hlSWR9Lmpzb25gKQogICAgY29uc3QgZGF0ZSA9IGZzLmxzdGF0U3luYyhmaWxlbmFtZSkuYmlydGh0aW1lCiAgICBjb25zdCBtb250aCA9IChkYXRlLmdldE1vbnRoKCkgKyAxKSA8IDEwID8gYDAke2RhdGUuZ2V0TW9udGgoKSArIDF9YCA6IGAke2RhdGUuZ2V0TW9udGgoKSArIDF9YAogICAgY29uc3QgZGF5ID0gZGF0ZS5nZXREYXRlKCkgPCAxMCA/IGAwJHtkYXRlLmdldERhdGUoKX1gIDogZGF0ZS5nZXREYXRlKCkKICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCkKICAgIGNvbnN0IG5ld0ZpbGVuYW1lID0gcGF0aC5qb2luKHBhdGgucmVzb2x2ZSh0aGlzLnBhdGgpLCBgJHt0aGlzLmNhY2hlSWR9XyR7eWVhcn0ke21vbnRofSR7ZGF5fS5qc29uYCkKICAgIGZzLnJlbmFtZVN5bmMoZmlsZW5hbWUsIG5ld0ZpbGVuYW1lKQogIH0KCiAgLyoqCiAgICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWQKICAgKi8KICBzYXZlIChwYXlsb2FkKSB7CiAgICBjb25zdCBjb250ZW50ID0gSlNPTi5zdHJpbmdpZnkocGF5bG9hZCwgbnVsbCwgMikKICAgIGZzLndyaXRlRmlsZVN5bmMoYCR7dGhpcy5wYXRofS8ke3RoaXMuY2FjaGVJZH0uanNvbmAsIGNvbnRlbnQsICd1dGY4JykKICB9CgogIC8qKgogICAqIEByZXR1cm4ge09iamVjdH0KICAgKi8KICBnZXQgKCkgewogICAgdHJ5IHsKICAgICAgY29uc3QgY29udGVudCA9IGZzLnJlYWRGaWxlU3luYyhgJHt0aGlzLnBhdGh9LyR7dGhpcy5jYWNoZUlkfS5qc29uYCwgJ3V0ZjgnKQogICAgICByZXR1cm4gSlNPTi5wYXJzZShjb250ZW50KQogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIGNvbnNvbGUubG9nKGBDYWNoZSBmaWxlICIke3RoaXMuY2FjaGVJZH0iIGRvZXNuJ3QgZXhpc3RgKQogICAgICByZXR1cm4ge30KICAgIH0KICB9CgogIGNoZWNrRW52IChjYWNoZUlkID0gbnVsbCkgewogICAgaWYgKGNhY2hlSWQpIHsKICAgICAgcmV0dXJuIGNhY2hlSWQKICAgICAgLy8gdXNlIHRoaXMgaWQKICAgIH0KCiAgICBpZiAocHJvY2Vzcy5lbnYuVEhFRVlFX0pPQikgewogICAgICBjYWNoZUlkID0gSlNPTi5wYXJzZShwcm9jZXNzLmVudi5USEVFWUVfSk9CKS50YXNrX2lkCiAgICB9IGVsc2UgewogICAgICBjYWNoZUlkID0gbmV3IERhdGUoKS5nZXRUaW1lKCkKICAgIH0KICAgIHJldHVybiBjYWNoZUlkCiAgfQp9CgoKY29uc3QgY2FjaGVJZCA9IEpTT04ucGFyc2UocHJvY2Vzcy5lbnYuVEhFRVlFX0pPQl9XT1JLRkxPVykuam9iX2lkCmNvbnN0IGNhY2hlID0gbmV3IENhY2hlKHsgY2FjaGVJZCB9KQpjb25zdCB3YWl0aW5nID0gY2FjaGUuZ2V0KCkud2FpdGluZyAtIDEKCmxldCBwYXlsb2FkCmlmICh3YWl0aW5nID4gMCkgewogIGNhY2hlLnNhdmUoeyB3YWl0aW5nIH0pCiAgcGF5bG9hZCA9IHsgZXZlbnRfbmFtZTogJ3dhaXRpbmcnLCBkYXRhOiBbeyB3YWl0aW5nIH1dIH0KfSBlbHNlIHsKICBjYWNoZS5kcm9wKCkKICBwYXlsb2FkID0geyBldmVudF9uYW1lOiAnYXByb2JhZG8nIH0KfQoKY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkp"},"host":"62ab70513f7eb10012be24dd","customer_id":"5562573181a2334537425eaf","customer":"5562573181a2334537425eaf","id":"dc399f7c-97ca-4255-a765-189cf5b7e3b7","source_model_id":"62abe97197c1350012ac281f"},{"order":0,"enable":true,"type":"notification","public":false,"tags":[],"triggers":[],"grace_time":0,"arguments_type":"legacy","output_parameters":[],"register_body":false,"multitasking":true,"show_result":false,"assigned_users":[],"user_inputs":false,"user_inputs_members":[],"acl":[],"empty_viewers":false,"cancellable":true,"autoremove_completed_jobs_limit":5,"version":2,"fingerprint":"e5896712-5571-527b-9573-50c9ad141840","recipients":["jailbirt@theeye.io","facugon@theeye.io"],"_type":"NotificationTask","creation_date":"2022-06-17T02:46:42.197Z","last_update":"2022-06-21T13:25:56.140Z","task_arguments":[{"id":1,"order":0,"type":"input","label":"subject","value":"","help":"","readonly":false,"required":false,"multiple":false,"masked":false,"options":[]},{"id":2,"order":1,"type":"input","label":"body","value":"","help":"","readonly":false,"required":false,"multiple":false,"masked":false,"options":[]},{"id":3,"order":2,"type":"input","label":"recipients","value":"","help":"","readonly":false,"required":false,"multiple":false,"masked":false,"options":[]}],"notificationTypes":{"push":true,"email":true,"socket":false,"desktop":true},"name":"Aprobado","description":"","subject":"scanOss Aprobado","body":"scan aprobado","customer_id":"5562573181a2334537425eaf","customer":"5562573181a2334537425eaf","allows_dynamic_settings":false,"template":null,"template_id":null,"id":"f6fdb9f8-95c9-4e8e-9b77-2b2351c1e401","source_model_id":"62abeb123aab0c00126a38b3"},{"order":0,"enable":true,"type":"script","public":false,"tags":[],"triggers":[],"grace_time":0,"task_arguments":[{"id":1,"order":0,"type":"fixed","label":"source directory","value":"/opt/theeye-agent-source","help":"","readonly":true,"required":true,"multiple":false,"masked":false,"options":[]}],"arguments_type":"legacy","output_parameters":[],"register_body":false,"multitasking":true,"show_result":false,"assigned_users":[],"user_inputs":false,"user_inputs_members":[],"acl":[],"empty_viewers":false,"cancellable":true,"autoremove_completed_jobs_limit":5,"version":1,"fingerprint":"ee386d60-9307-5da3-a4b6-0a5a79302b1b","agent_logging":false,"_type":"ScriptTask","creation_date":"2022-06-21T11:54:51.029Z","last_update":"2022-06-21T13:25:10.028Z","customer_id":"5562573181a2334537425eaf","name":"Git pull","description":"","timeout":600000,"allows_dynamic_settings":false,"script_id":"62b1b07897c1350012ad1d93","script_runas":"bash %script%","host_id":"62ab70513f7eb10012be24dd","template_id":null,"script":{"order":0,"enable":true,"acl":[""],"tags":[],"description":"","md5":"ab934c421142d038ae1348b235b8d036","_type":"Script","creation_date":"2022-06-21T11:50:16.219Z","last_update":"2022-06-21T11:51:48.917Z","_id":"62b1b07897c1350012ad1d93","filename":"gitPullLastAndDiscardLocal.sh","mimetype":"text/x-sh","extension":"sh","size":120,"customer":"5562573181a2334537425eaf","customer_id":"5562573181a2334537425eaf","customer_name":"demo","keyname":"gitPullLastAndDiscardLocal.sh[ts:1655812308858]","id":"62b1b07897c1350012ad1d93","source_model_id":"62b1b07897c1350012ad1d93","data":"data:text/plain;base64,IyEvYmluL2Jhc2gKY2QgJDEKZ2l0IHJlc2V0IC0taGFyZCBvcmlnaW4vbWFzdGVyCmdpdCBwdWxsIG9yaWdpbiBtYXN0ZXIKZWNobyAneyJldmVudF9uYW1lIjoic3VjY2VzcyIsImRhdGEiOiBbIickMSciXX0n"},"host":"62ab70513f7eb10012be24dd","customer":"5562573181a2334537425eaf","id":"2f8dced1-e747-4a15-86fa-4bb3e347113f","source_model_id":"62b1b18b3f7eb10012bf3cde"},{"order":0,"enable":true,"type":"script","public":false,"tags":[],"triggers":[],"grace_time":0,"task_arguments":[],"arguments_type":"legacy","output_parameters":[],"register_body":false,"multitasking":true,"show_result":true,"assigned_users":[],"user_inputs":false,"user_inputs_members":[],"acl":[],"empty_viewers":false,"cancellable":true,"autoremove_completed_jobs_limit":5,"version":2,"fingerprint":"f275b34c-5c92-5198-8111-e1d00770a158","agent_logging":false,"_type":"ScriptTask","creation_date":"2022-06-21T12:44:31.165Z","last_update":"2022-06-21T13:24:17.133Z","name":"Cancelación Dummy","description":"","timeout":600000,"allows_dynamic_settings":false,"script_id":"62b1bca33aab0c00126b3e49","script_runas":"bash %script%","host_id":"5bb755f42f78660012bdd9a6","script":{"order":0,"enable":true,"acl":[""],"tags":[],"description":"","md5":"12a703fedfb3f7750fa1f7636912ad1e","_type":"Script","creation_date":"2022-06-21T12:42:11.380Z","last_update":"2022-06-21T12:56:55.633Z","_id":"62b1bca33aab0c00126b3e49","filename":"AvisoQuienNoAprobo.sh","mimetype":"text/x-sh","extension":"sh","size":60,"customer":"5562573181a2334537425eaf","customer_id":"5562573181a2334537425eaf","customer_name":"demo","keyname":"AvisoQuienNoAprobo.sh[ts:1655816215576]","id":"62b1bca33aab0c00126b3e49","source_model_id":"62b1bca33aab0c00126b3e49","data":"data:text/plain;base64,IyEvYmluL2Jhc2gKZWNobyAneyJldmVudF9uYW1lIjoic3VjY2VzcyIsImRhdGEiOiBbIickMSciXX0n"},"host":"5bb755f42f78660012bdd9a6","customer_id":"5562573181a2334537425eaf","customer":"5562573181a2334537425eaf","template":null,"template_id":null,"id":"36a29528-7684-42de-99a6-125ae9f3c439","source_model_id":"62b1bd2f97c1350012ad2051"},{"order":0,"enable":true,"type":"notification","public":false,"tags":[],"triggers":[],"grace_time":0,"arguments_type":"legacy","output_parameters":[],"register_body":false,"multitasking":true,"show_result":false,"assigned_users":[],"user_inputs":false,"user_inputs_members":[],"acl":[],"empty_viewers":false,"cancellable":true,"autoremove_completed_jobs_limit":5,"version":1,"fingerprint":"229559a0-7f56-5255-bcfe-7d760b6aec3f","recipients":["jailbirt@theeye.io","facugon@theeye.io"],"_type":"NotificationTask","creation_date":"2022-06-21T12:44:31.199Z","last_update":"2022-06-21T13:24:17.131Z","task_arguments":[{"id":1,"order":0,"type":"input","label":"subject","help":"","readonly":false,"required":false,"masked":false,"options":[]},{"id":2,"order":1,"type":"input","label":"body","help":"","readonly":false,"required":false,"masked":false,"options":[]},{"id":3,"order":2,"type":"input","label":"recipients","help":"","readonly":false,"required":false,"masked":false,"options":[]}],"notificationTypes":{"push":true,"email":true,"socket":false,"desktop":true},"name":"No Aprobado","description":"","subject":"No se aprobó","body":"No se aprobó el despliegue","customer_id":"5562573181a2334537425eaf","customer":"5562573181a2334537425eaf","allows_dynamic_settings":false,"id":"7e2954a6-ae9c-476a-bf28-770cf727d251","source_model_id":"62b1bd2f97c1350012ad2055"}]}